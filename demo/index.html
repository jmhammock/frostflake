<!DOCTYPE html>
<html>

<head>
    <title>FrostFlake Demo</title>
</head>

<body>
    <canvas id="frostFlake" width="640" height="480"></canvas>

    <ul>
        <li><button id="Empty">Empty View</button></li>
        <li><button id="ManySpritesDemo">2,000 Sprite Demo</button></li>
        <li><button id="InputDemo">Input Demo</button></li>
        <li><button id="ParentChildDemo">Parent Child Demo</button></li>
        <li><button id="AnimationDemo">Animation Demo</button></li>
        <li><button id="CollisionDemo">Collision Demo</button></li>
        <li><button id="RenderTargetDemo">Render Target Demo</button></li>
    </ul>

    <script type="module">
        import FrostFlake from '../../src/FrostFlake.js';

        // must import these because they are used dynamically
        // by the buttons
        import View from '../../src/Views/View.js';
        import ManySpritesDemo from './js/ManySpritesDemo.js';
        import InputDemo from './js/InputDemo.js';
        import ParentChildDemo from './js/ParentChildDemo.js';
        import AnimationDemo from './js/AnimationDemo.js';
        import CollisionDemo from './js/CollisionDemo.js';
        import RenderTargetDemo from './js/RenderTargetDemo.js';

        // get a reference to the canvas element
        let canvas = document.getElementById('frostFlake');

        // initialize frostflake with a reference to the canvas and target FPS
        let ff = new FrostFlake(canvas, 60);

        // turn debug visualizations on or off
        ff.showDebug = false;

        // start the game engine
        ff.start();

        // make button clicks switch demo views
        let buttons = document.getElementsByTagName('button');
        for (let i = 0; i < buttons.length; i++) {
            let view = buttons[i].id;
            buttons[i].addEventListener('click', evt => {
                console.clear();
                ff.camera.reset();
                if (view == "Empty") {
                    ff.view = new View();
                }
                else {
                    ff.view = eval(`new ${view}`);
                }
            });
        }

        // this is a hack to make the game engine available at global
        // scope so beginners can hack on it in the browser. This should
        // generally not be done in production
        window.ff = ff;

    </script>
</body>

</html>